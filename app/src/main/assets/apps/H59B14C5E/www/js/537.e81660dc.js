"use strict";(self["webpackChunkez_pay"]=self["webpackChunkez_pay"]||[]).push([[537],{76537:function(t,e,i){i.r(e),i.d(e,{default:function(){return d}});var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"page page-messages"},[i("van-list",{attrs:{error:t.error,"error-text":t.errorText,finished:t.finished,"finished-text":"暂无更多消息"},on:{"update:error":function(e){t.error=e},load:t.loadList},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,(function(e,a){return i("van-cell",{key:a,class:{disabled:"Read"===e.status},attrs:{title:e.title,label:t._f("dateFormat")(e.createTime,"Y-M-D"),"is-link":"",clickable:""},on:{click:function(){return t.handlerClickMsg(e)}}})})),1)],1)},n=[],r=i(68932),s=(i(21249),i(13652)),l={data:function(){return{loading:!1,error:!1,finished:!1,errorText:"加载失败，点击重试",list:[],page:1,pageSize:20}},created:function(){var t=this;this.$root.$emit("root:set-topbar",["left-back","custom-btn"],{label:"一键已读",onClick:function(){(0,s.Mj)().then((function(e){var i=e.ok,a=e.msg;i?t.list.map((function(t){return t.status="Read",t})):t.$notice.fail(a)}))}})},methods:{loadList:function(){var t=this;(0,s._U)({page:this.page,pageSize:this.pageSize}).then((function(e){var i=e.ok,a=e.data,n=e.msg;if(t.loading=!1,i){var s;if(1===t.page)t.list=a.list||[];else(s=t.list).push.apply(s,(0,r.Z)(a.list||[]));t.finished=t.page*t.pageSize>=a.total,t.page+=1}else t.error=!0,t.errorText=n}))},handlerClickMsg:function(t){var e=this,i=t.status,a=t.contentId,n=t.content;"Unread"===i?(0,s.$h)({contentId:a}).then((function(t){var i=t.ok,a=t.msg;i?(e.$st.set("MSG_CONTENT",n),e.$router.push("/msg_detail")):e.$notice.fail(a)})):(this.$st.set("MSG_CONTENT",n),this.$router.push("/msg_detail"))}}},o=l,c=i(1001),u=(0,c.Z)(o,a,n,!1,null,null,null),d=u.exports}}]);