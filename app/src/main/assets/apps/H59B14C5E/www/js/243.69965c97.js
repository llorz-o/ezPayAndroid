"use strict";(self["webpackChunkez_pay"]=self["webpackChunkez_pay"]||[]).push([[243],{6243:function(t,e,o){o.r(e),o.d(e,{default:function(){return c}});var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"page page-user-bill"},[o("div",{staticClass:"hd border_bottom_1px"},[o("div",{staticClass:"item"},[t._v("账变时间")]),o("div",{staticClass:"item"},[o("van-dropdown-menu",[o("van-dropdown-item",{ref:"bill_type",attrs:{title:"账变类型"}},[o("van-radio-group",{on:{change:t.onChange},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},t._l(t.types,(function(e,a){return o("van-radio",{key:a,staticClass:"btn",attrs:{name:a}},[o("van-button",{staticClass:"btn",attrs:{slot:"icon"},on:{click:function(e){return t.clearSelect(a)}},slot:"icon"},[t._v(" "+t._s(e)+" ")])],1)})),1)],1)],1)],1),o("div",{staticClass:"item"},[t._v("账变金额")])]),o("van-list",{ref:"list",attrs:{error:t.error,finished:t.finished,"error-text":t.errorText,"finished-text":"暂无更多数据"},on:{"update:error":function(e){t.error=e},load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,(function(e,a){return o("div",{key:a,staticClass:"row border_bottom_1px"},[o("div",{staticClass:"item"},[t._v(" "+t._s(t._f("dateFormat")(e.createTime,"Y/M/D h:m:s"))+" ")]),o("div",{staticClass:"item"},[t._v(t._s(e.type_name))]),o("div",{staticClass:"item"},[t._v(t._s(parseFloat(e.amount).toFixed(2)))])])})),0),o("van-action-sheet",{attrs:{actions:t.actions},on:{select:t.onSelect},model:{value:t.showAction,callback:function(e){t.showAction=e},expression:"showAction"}}),o("van-calendar",{attrs:{type:"range","min-date":t.minDate,"max-date":t.maxDate},on:{confirm:t.onConfirm},model:{value:t.showCalendar,callback:function(e){t.showCalendar=e},expression:"showCalendar"}})],1)},s=[],i=o(3652),n=o(6163),r={data(){return{showAction:!1,actions:[{name:"今日",value:"today"},{name:"近三天",value:"d3"},{name:"近五天",value:"d5"},{name:"自定义",value:"custom"},{name:"取消",value:"cancel"}],minDate:new Date(2022,0,1),maxDate:new Date,types:{},form:{startTime:(0,n._7)().hour("0").minute("0").second("0").format("Y-M-D h:m:s"),endTime:(0,n._7)().hour("23").minute("59").second("59").format("Y-M-D h:m:s"),type:"",page:1,pageSize:20},list:[],loading:!1,error:!1,finished:!1,errorText:"加载失败，点击重试",showCalendar:!1}},created(){this.$root.$emit("root:set-topbar",["left-back","time-picker"],{down:!0,label:"今天",onClick:this.onClickTime}),this.loadChangeType()},methods:{onSelect(t){"custom"==t.value?this.showCalendar=!0:(this.$root.topConfig.label=t.name,this.$root.topConfig.down=!0,this.form.endTime=(0,n._7)().hour("23").minute("59").second("59").format("Y-M-D h:m:s"),"today"==t.value&&(this.form.startTime=(0,n._7)().hour("0").minute("0").second("0").format("Y-M-D h:m:s")),"d3"==t.value&&(this.form.startTime=(0,n._7)().day(-3).hour("0").minute("0").second("0").format("Y-M-D h:m:s")),"d5"==t.value&&(this.form.startTime=(0,n._7)().day(-5).hour("0").minute("0").second("0").format("Y-M-D h:m:s")),this.onChange()),this.showAction=!1},onConfirm(t){const[e,o]=t;this.form.startTime=(0,n.vc)(e,"Y-M-D h:m:s"),this.form.endTime=(0,n._7)(o).hour("23").minute("59").second("59").format("Y-M-D h:m:s"),this.showCalendar=!1,this.$root.topConfig.down=!0,this.onChange()},onClickTime(){this.showAction=!0,this.$root.topConfig.down=!1},onLoad(){(0,i.RI)(this.$root.$tls.processParams({...this.form},["shake"])).then((({ok:t,data:e,msg:o})=>{t?(1==this.form.page?this.list=e.list:this.list.push(...e.list),this.laoding=!1,this.finished=this.form.page*this.form.pageSize>=e.total,this.form.page+=1):(this.error=!0,this.errorText=o,this.$toast.fail(o))}))},loadChangeType(){(0,i.pO)().then((({ok:t,data:e,msg:o})=>{t?this.types=e:this.$toast.fail(o)}))},onChange(){this.$refs.bill_type.toggle(!1),this.form.page=1,this.list=[],this.onLoad()},clearSelect(t){this.form.type===t&&setTimeout((()=>this.form.type=""),50)}}},l=r,m=o(1001),h=(0,m.Z)(l,a,s,!1,null,null,null),c=h.exports}}]);