"use strict";(self["webpackChunkez_pay"]=self["webpackChunkez_pay"]||[]).push([[148],{5148:function(t,e,o){o.r(e),o.d(e,{default:function(){return u}});var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"page page-user-bill"},[o("div",{staticClass:"hd border_bottom_1px"},[o("div",{staticClass:"item"},[t._v("账变时间")]),o("div",{staticClass:"item"},[o("van-dropdown-menu",[o("van-dropdown-item",{ref:"bill_type",attrs:{title:"账变类型"}},[o("van-radio-group",{on:{change:t.onChange},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},t._l(t.types,(function(e,a){return o("van-radio",{key:a,staticClass:"btn",attrs:{name:a}},[o("van-button",{staticClass:"btn",attrs:{slot:"icon"},on:{click:function(e){return t.clearSelect(a)}},slot:"icon"},[t._v(" "+t._s(e)+" ")])],1)})),1)],1)],1)],1),o("div",{staticClass:"item"},[t._v("账变金额")])]),o("van-list",{ref:"list",attrs:{error:t.error,finished:t.finished,"error-text":t.errorText,"finished-text":"暂无更多数据"},on:{"update:error":function(e){t.error=e},load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,(function(e,a){return o("div",{key:a,staticClass:"row border_bottom_1px"},[o("div",{staticClass:"item"},[t._v(" "+t._s(t._f("dateFormat")(e.createTime,"Y/M/D h:m:s"))+" ")]),o("div",{staticClass:"item"},[t._v(t._s(e.type_name))]),o("div",{staticClass:"item"},[t._v(t._s(parseFloat(e.amount).toFixed(2)))])])})),0),o("van-action-sheet",{attrs:{actions:t.actions,"safe-area-inset-bottom":""},on:{select:t.onSelect},model:{value:t.showAction,callback:function(e){t.showAction=e},expression:"showAction"}}),o("van-calendar",{attrs:{type:"range","min-date":t.minDate,"max-date":t.maxDate,"safe-area-inset-bottom":""},on:{confirm:t.onConfirm},model:{value:t.showCalendar,callback:function(e){t.showCalendar=e},expression:"showCalendar"}})],1)},n=[],i=o(68932),s=o(4367),r=o(75200),l=(o(68309),o(13652)),m=o(6163),c={data:function(){return{showAction:!1,actions:[{name:"今日",value:"today"},{name:"近三天",value:"d3"},{name:"近五天",value:"d5"},{name:"自定义",value:"custom"},{name:"取消",value:"cancel"}],minDate:new Date(2022,0,1),maxDate:new Date,types:{},form:{startTime:(0,m._7)().hour("0").minute("0").second("0").format("Y-M-D h:m:s"),endTime:(0,m._7)().hour("23").minute("59").second("59").format("Y-M-D h:m:s"),type:"",page:1,pageSize:20},list:[],loading:!1,error:!1,finished:!1,errorText:"加载失败，点击重试",showCalendar:!1}},created:function(){this.$root.$emit("root:set-topbar",["left-back","time-picker"],{down:!0,label:"今天",onClick:this.onClickTime}),this.loadChangeType()},methods:{onSelect:function(t){"custom"==t.value?this.showCalendar=!0:(this.$root.topConfig.label=t.name,this.$root.topConfig.down=!0,this.form.endTime=(0,m._7)().hour("23").minute("59").second("59").format("Y-M-D h:m:s"),"today"==t.value&&(this.form.startTime=(0,m._7)().hour("0").minute("0").second("0").format("Y-M-D h:m:s")),"d3"==t.value&&(this.form.startTime=(0,m._7)().day(-3).hour("0").minute("0").second("0").format("Y-M-D h:m:s")),"d5"==t.value&&(this.form.startTime=(0,m._7)().day(-5).hour("0").minute("0").second("0").format("Y-M-D h:m:s")),this.onChange()),this.showAction=!1},onConfirm:function(t){var e=(0,r.Z)(t,2),o=e[0],a=e[1];this.form.startTime=(0,m.vc)(o,"Y-M-D h:m:s"),this.form.endTime=(0,m._7)(a).hour("23").minute("59").second("59").format("Y-M-D h:m:s"),this.showCalendar=!1,this.$root.topConfig.label="自定义",this.$root.topConfig.down=!0,this.onChange()},onClickTime:function(){this.showAction=!0,this.$root.topConfig.down=!1},onLoad:function(){var t=this;(0,l.RI)(this.$root.$tls.processParams((0,s.Z)({},this.form),["shake"])).then((function(e){var o=e.ok,a=e.data,n=e.msg;if(o){var s;if(1==t.form.page)t.list=a.list;else(s=t.list).push.apply(s,(0,i.Z)(a.list));t.laoding=!1,t.finished=t.form.page*t.form.pageSize>=a.total,t.form.page+=1}else t.error=!0,t.errorText=n,t.$toast.fail(n)}))},loadChangeType:function(){var t=this;(0,l.pO)().then((function(e){var o=e.ok,a=e.data,n=e.msg;o?t.types=a:t.$toast.fail(n)}))},onChange:function(){this.$refs.bill_type.toggle(!1),this.form.page=1,this.list=[],this.onLoad()},clearSelect:function(t){var e=this;this.form.type===t&&setTimeout((function(){return e.form.type=""}),50)}}},h=c,d=o(1001),f=(0,d.Z)(h,a,n,!1,null,null,null),u=f.exports}}]);