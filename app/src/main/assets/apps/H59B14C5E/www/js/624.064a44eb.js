"use strict";(self["webpackChunkez_pay"]=self["webpackChunkez_pay"]||[]).push([[624],{63624:function(t,e,n){n.r(e),n.d(e,{default:function(){return q}});var r,a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page graybg page-home"},[n("div",{staticClass:"balanceBg"},[n("div",{staticClass:"balanceBox"},[n("div",{staticClass:"welcomeEl"},[t._v(" 欢迎 "),t.$root.userInfo.realName?n("span",{staticClass:"name"},[t._v(t._s(t.$root.userInfo.realName))]):n("span",{staticClass:"name",on:{click:function(e){return t.$router.push("/user_certify")}}},[t._v(" 请先实名 ")])]),n("div",{staticClass:"balanceEl",on:{click:t.refreshBalance}},[n("h3",{staticClass:"balanceLable"},[n("span",[t._v(" 余额 ")]),n("span",{staticClass:"refreshBalance"},[t.isLoadingBalance?n("van-loading",{attrs:{size:"20",type:"spinner"}}):n("van-icon",{attrs:{name:"replay",size:"20"}})],1)]),n("div",{staticClass:"balance"},[n("span",{staticClass:"value"},[t._v(" "+t._s(parseFloat(t.$root.userInfo.balance).toFixed(2))+" ")]),n("span",{staticClass:"unit"},[t._v(" V币 ")])])]),n("div",{staticClass:"walletAdderssEl"},[n("van-icon",{attrs:{name:"map-marked"}}),n("span",[t._v(t._s(t.$root.userInfo.walletAddress))]),n("button",{directives:[{name:"clipboard",rawName:"v-clipboard",value:t.$root.userInfo.walletAddress,expression:"$root.userInfo.walletAddress"}],staticClass:"copy copyBtn",on:{success:t.$root.copySuccessful}})],1)])]),n("div",{staticClass:"balanceDetail"},[n("van-grid",{attrs:{border:!1,"column-num":3}},[n("van-grid-item",{staticClass:"border_right_1px"},[n("div",{staticClass:"balanceEl"},[n("span",{staticClass:"balance"},[t._v(" "+t._s(parseFloat(t.$root.userInfo.validSellBalance).toFixed(2))+" ")]),n("span",{staticClass:"unit"},[t._v(" V币 ")])]),n("div",{staticClass:"label"},[t._v("可售数量")])]),n("van-grid-item",{staticClass:"border_right_1px"},[n("div",{staticClass:"balanceEl"},[n("span",{staticClass:"balance"},[t._v(" "+t._s(parseFloat(t.$root.userInfo.sumSellAmount).toFixed(2))+" ")]),n("span",{staticClass:"unit"},[t._v(" V币 ")])]),n("div",{staticClass:"label"},[t._v("卖单余额")])]),n("van-grid-item",{staticClass:"border_right_1px"},[n("div",{staticClass:"balanceEl"},[n("span",{staticClass:"balance"},[t._v(" "+t._s(parseFloat(t.$root.userInfo.sumFrozenAmount).toFixed(2))+" ")]),n("span",{staticClass:"unit"},[t._v(" V币 ")])]),n("div",{staticClass:"label"},[t._v("交易中")])])],1),n("div",{staticClass:"btnsBox"},[n("van-button",{attrs:{color:"#F0535F",to:"/sale"}},[t._v("卖币")]),n("van-button",{attrs:{color:"#6F59FE",replace:"",to:"/transaction"}},[t._v("买币")]),n("span",{staticClass:"split"}),n("van-button",{attrs:{color:"#1890ff",to:"/user_transfer"}},[t._v("转账")])],1)],1),n("van-notice-bar",{attrs:{text:t.announcement.length?t.announcement[t.announcementIndex].content:"暂无公告内容！",background:"#fff",color:"#333",scrollable:""},on:{replay:t.handleReplay}},[n("span",{staticClass:"icon icon-notice",attrs:{slot:"left-icon"},slot:"left-icon"})]),n("div",{staticClass:"hangOrder border_top_1px"},[n("div",{staticClass:"title"},[n("span",[t._v("我的挂单")]),n("span",{on:{click:function(e){return t.$router.push("/my_hang_orders")}}},[t._v("更多")])]),t._l(t.hangOrders,(function(t,e){return n("HangOrderItem",{key:e,attrs:{dt:t}})}))],2),n("div",{staticClass:"tansactionOrder border_top_1px"},[n("div",{staticClass:"title"},[n("span",[t._v("交易记录")]),n("span",{on:{click:function(e){return t.$router.replace("/orders")}}},[t._v("更多")])]),t._l(t.orders,(function(t,e){return n("TransactionItem",{key:e,attrs:{dt:t}})}))],2)],1)},s=[],i=n(16198),o=n(23796),u=(n(78975),n(68309),n(9653),n(42960)),c=n(20285),l=n(87043),d=n(66742),m=(0,u.d)("grid"),p=m[0],f=m[1],h=p({mixins:[(0,d.G)("vanGrid")],props:{square:Boolean,gutter:[Number,String],iconSize:[Number,String],direction:String,clickable:Boolean,columnNum:{type:[Number,String],default:4},center:{type:Boolean,default:!0},border:{type:Boolean,default:!0}},computed:{style:function(){var t=this.gutter;if(t)return{paddingLeft:(0,c.N)(t)}}},render:function(){var t,e=arguments[0];return e("div",{style:this.style,class:[f(),(t={},t[l.k7]=this.border&&!this.gutter,t)]},[this.slots()])}}),v=n(6885),g=n(81425),_=n(2718),C=n(71911),O=(0,u.d)("grid-item"),b=O[0],y=O[1],S=b({mixins:[(0,d.j)("vanGrid")],props:(0,v.Z)({},g.g2,{dot:Boolean,text:String,icon:String,iconPrefix:String,info:[Number,String],badge:[Number,String]}),computed:{style:function(){var t=this.parent,e=t.square,n=t.gutter,r=t.columnNum,a=100/r+"%",s={flexBasis:a};if(e)s.paddingTop=a;else if(n){var i=(0,c.N)(n);s.paddingRight=i,this.index>=r&&(s.marginTop=i)}return s},contentStyle:function(){var t=this.parent,e=t.square,n=t.gutter;if(e&&n){var r=(0,c.N)(n);return{right:r,bottom:r,height:"auto"}}}},methods:{onClick:function(t){this.$emit("click",t),(0,g.BC)(this.$router,this)},genIcon:function(){var t,e=this.$createElement,n=this.slots("icon"),r=null!=(t=this.badge)?t:this.info;return n?e("div",{class:y("icon-wrapper")},[n,e(_.Z,{attrs:{dot:this.dot,info:r}})]):this.icon?e(C.Z,{attrs:{name:this.icon,dot:this.dot,badge:r,size:this.parent.iconSize,classPrefix:this.iconPrefix},class:y("icon")}):void 0},getText:function(){var t=this.$createElement,e=this.slots("text");return e||(this.text?t("span",{class:y("text")},[this.text]):void 0)},genContent:function(){var t=this.slots();return t||[this.genIcon(),this.getText()]}},render:function(){var t,e=arguments[0],n=this.parent,r=n.center,a=n.border,s=n.square,i=n.gutter,o=n.direction,u=n.clickable;return e("div",{class:[y({square:s})],style:this.style},[e("div",{style:this.contentStyle,attrs:{role:u?"button":null,tabindex:u?0:null},class:[y("content",[o,{center:r,square:s,clickable:u,surround:a&&i}]),(t={},t[l.T5]=a,t)],on:{click:this.onClick}},[this.genContent()])])}}),k=n(21380),x=n(51161),T=n(42444),$={components:(r={HangOrderItem:T.K,TransactionItem:T.A},(0,o.Z)(r,h.name,h),(0,o.Z)(r,S.name,S),r),data:function(){return{hangOrders:[],orders:[],isLoadingBalance:!1,announcement:[],announcementIndex:0}},created:function(){this.$root.updateUnReadCount(),this.loadHangOrders(),this.loadOrders(),this.$root.$emit("root:set-topbar",["user-center","help","notices","customer-service"]),this.$root.$emit("root:set-layout",{bottom:!0}),this.getAnnouncement()},methods:{handleReplay:function(){this.announcementIndex+=1,this.announcementIndex>=this.announcement.length&&(this.announcementIndex=0)},getAnnouncement:function(){var t=this;return(0,i.Z)(regeneratorRuntime.mark((function e(){var n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,x.k5)({page:1,pageSize:20});case 2:n=e.sent,r=n.ok,n.msg,a=n.data,r?(t.announcementIndex=0,t.announcement=a.list):t.announcement=[];case 7:case"end":return e.stop()}}),e)})))()},refreshBalance:function(){var t=this;return(0,i.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isLoadingBalance=!0,e.next=3,t.$root.fetchUserInfo();case 3:t.isLoadingBalance=!1;case 4:case"end":return e.stop()}}),e)})))()},loadHangOrders:function(){var t=this;(0,k.$Z)({page:1,pageSize:3}).then((function(e){var n=e.ok,r=e.msg,a=e.data;n?t.hangOrders=a.list:t.$toast.fail(r)}))},loadOrders:function(){var t=this;(0,k.uF)({page:1,pageSize:3}).then((function(e){var n=e.ok,r=e.msg,a=e.data;n?t.orders=a.list:t.$toast.fail(r)}))}}},A=$,I=n(1001),P=(0,I.Z)(A,a,s,!1,null,null,null),q=P.exports},21380:function(t,e,n){n.d(e,{$Z:function(){return u},$i:function(){return o},CI:function(){return h},Ej:function(){return g},Hn:function(){return l},N8:function(){return v},R9:function(){return b},T7:function(){return S},XW:function(){return _},_H:function(){return a},_d:function(){return C},an:function(){return p},cf:function(){return m},dF:function(){return d},fW:function(){return c},l$:function(){return O},uF:function(){return s},v1:function(){return i},vi:function(){return f},y6:function(){return y}});var r=n(51922),a=function(t){return(0,r.q)({url:"/Api/Market/PendingOrder/marketPendingOrderList",method:"POST",data:t})},s=function(t){return(0,r.q)({url:"/Api/Market/Order/myOrderList",method:"GET",data:t})},i=function(t){return(0,r.q)({url:"/Api/Market/Sell/index",method:"POST",data:t})},o=function(t){return(0,r.q)({url:"/Api/Market/Sell/recycle",method:"POST",data:t})},u=function(t){return(0,r.q)({url:"Api/Market/PendingOrder/myPendingOrderList",method:"POST",data:t})},c=function(t){return(0,r.q)({url:"/Api/Market/Order/myOrderDetail",method:"GET",data:t})},l=function(t){return(0,r.q)({url:"/Api/Market/PendingOrder/marketPendingOrderDetail",method:"POST",data:t})},d=function(t){return(0,r.q)({url:"/Api/Market/Order/getCurrentOrderStatus",method:"GET",data:t})},m=function(t){return(0,r.q)({url:"/Api/Market/PendingOrder/myPendingOrderDetail",method:"GET",data:t})},p=function(t){return(0,r.q)({url:"/Api/Market/Order/buyerCreatesOrder",method:"POST",data:t})},f=function(t){return(0,r.q)({url:"/Api/Market/PendingOrder/getOrderListByPendingOrder",method:"GET",data:t})},h=function(t){return(0,r.q)({url:"/Api/Market/Order/sellerRefusesToCreateOrder",method:"POST",data:t})},v=function(t){return(0,r.q)({url:"/Api/Market/Order/sellerConfirmsToCreateOrder",method:"POST",data:t})},g=function(t){return(0,r.q)({url:"/Api/Market/Order/sellerHasNotReceivedPayment",method:"POST",data:t})},_=function(t){return(0,r.q)({url:"/Api/Market/Order/sellerCompletesOrder",method:"POST",data:t})},C=function(t){return(0,r.q)({url:"/Api/Market/Order/buyerCancelsOrder",method:"POST",data:t})},O=function(t){return(0,r.q)({url:"/Api/Market/Order/buyerConfirmsOrderHasBeenPaid",method:"POST",data:t})},b=function(t){return(0,r.q)({url:"/Api/Market/Order/buyerAppeals",method:"POST",data:t})},y=function(t){return(0,r.q)({url:"/Api/Market/Order/getCancelsOrderDailyCount",method:"GET",data:t})},S=function(t){return(0,r.q)({url:"/Api/User/TransferOrder/userDeposit",method:"POST",data:t})}},42444:function(t,e,n){n.d(e,{K:function(){return c},A:function(){return h}});var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"hang-order",on:{click:function(e){return t.$router.push("/my_hang_order/"+t.dt.pendingOrderId)}}},[n("div",{staticClass:"time"},[t._v(" 挂单时间 "+t._s(t._f("dateFormat")(t.dt.createTime,"M/D h:m:s"))+" ")]),n("div",{staticClass:"content"},[n("span",{staticClass:"payment-method"},t._l(t.payments,(function(t,e){return n("div",{key:e,staticClass:"item",class:"pay"+t})})),0),n("span",{staticClass:"order-type"},[t._v(t._s(t.dt.isSplit?"可拆分":"不可拆分"))]),n("span",{staticClass:"amount"},[t._v(" "+t._s(t._f("amountFormat")(t.dt.validAmount,{places:0}))+" V币 ")]),n("span",{staticClass:"order-status",class:t.stateClass},[t._v(" "+t._s(t.stateStr)+" ")]),n("van-icon",{attrs:{name:"arrow"}})],1)])},a=[],s={name:"hangOrderItem",props:{dt:{type:Object,default:function(){return{createTime:(new Date).toLocaleDateString(),paymentType:7,isSplit:0,amount:"13076598",status:1,underwayOrder:1}}}},computed:{stateClass:function(){return this.dt.underwayOrder>0?"underway":1===this.dt.status?"hanging":0===this.dt.status?"closed":void 0},stateStr:function(){return 1==this.dt.frozen?"冻结":this.dt.underwayOrder>0?"已发起交易":1===this.dt.status?"挂单中...":0===this.dt.status?this.dt.amount==this.dt.soldAmount?"已售罄":"取消挂单":void 0},payments:function(){return this.$root.parsePayments(this.dt.paymentType)}},methods:{}},i=s,o=n(1001),u=(0,o.Z)(i,r,a,!1,null,"b8886d6a",null),c=u.exports,l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"transaction",on:{click:function(e){return t.$router.push("/"+(t.isSale?"transaction_sale":"transaction_buy")+"/"+t.dt.orderId)}}},[n("span",{staticClass:"inout bg",class:t.isSale?"out":"in"},[t._v(" "+t._s(t.isSale?"卖":"买")+" ")]),n("span",{staticClass:"time"},[t._v(" "+t._s(t.ymd)+" "),n("br"),t._v(" "+t._s(t.hms)+" ")]),n("span",{staticClass:"amountEl"},[n("span",{staticClass:"amount",class:t.isSale?"out":"in"},[t._v(" "+t._s(t._f("amountFormat")(t.dt.amount))+" ")]),n("span",{staticClass:"unit"},[t._v(" V币 ")])]),n("span",{staticClass:"order-status",class:t._f("transactingOrderStatus")(t.dt.status)},[t._v(" "+t._s(t._f("transactingOrderStatus")(t.dt.status,"seller-content"))+" ")])])},d=[],m=(n(47042),{name:"TransactionItem",props:{dt:{type:Object,default:function(){return{orderType:1,time:(new Date).toLocaleDateString(),amount:"0",orderStatus:"WaitingSellerConfirm"}}}},computed:{orderTime:function(){return this.$options.filters.dateFormat(this.dt.createTime,"Y/M/D h:m:s")},ymd:function(){return this.orderTime.slice(0,10)},hms:function(){return this.orderTime.slice(11)},isSale:function(){return this.dt.sellerId==this.$root.userInfo.userId&&"Member"===this.dt.sellerType}}}),p=m,f=(0,o.Z)(p,l,d,!1,null,"09675991",null),h=f.exports}}]);