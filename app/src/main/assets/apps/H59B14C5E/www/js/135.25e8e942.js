"use strict";(self["webpackChunkez_pay"]=self["webpackChunkez_pay"]||[]).push([[135],{7135:function(s,t,o){o.r(t),o.d(t,{default:function(){return w}});var e=function(){var s=this,t=s.$createElement,o=s._self._c||t;return o("div",{staticClass:"page page-user-pay-psw"},[o("van-form",{on:{submit:s.onSubmit}},[s.$root.userInfo.secPasswordStatus?o("div",{staticClass:"form-item"},[o("div",{staticClass:"label"},[s._v("旧密码")]),o("van-field",{attrs:{autocomplete:s.$root.getHash(),type:s.showPsw?"text":"password",placeholder:"请输入原密码",maxlength:"6"},model:{value:s.form.oldSecPassword,callback:function(t){s.$set(s.form,"oldSecPassword",t)},expression:"form.oldSecPassword"}},[o("van-button",{staticClass:"btn",attrs:{slot:"extra",size:"mini",icon:s.showPsw?"eye-o":"closed-eye","native-type":"button"},on:{click:function(t){s.showPsw=!s.showPsw}},slot:"extra"})],1),o("div",{staticClass:"tip"},[s._v("资金密码为6位纯数字")])],1):s._e(),o("div",{staticClass:"form-item"},[o("div",{staticClass:"label"},[s._v("新密码")]),o("van-field",{attrs:{autocomplete:s.$root.getHash(),type:s.showPsw2?"text":"password",placeholder:"请输入新密码",maxlength:"6",clearable:""},model:{value:s.form.newSecPassword,callback:function(t){s.$set(s.form,"newSecPassword",t)},expression:"form.newSecPassword"}},[o("van-button",{staticClass:"btn",attrs:{slot:"extra",size:"mini",icon:s.showPsw2?"eye-o":"closed-eye","native-type":"button"},on:{click:function(t){s.showPsw2=!s.showPsw2}},slot:"extra"})],1),o("div",{staticClass:"tip"},[s._v("资金密码为6位纯数字")])],1),o("div",{staticClass:"form-item"},[o("div",{staticClass:"label"},[s._v("确认新密码")]),o("van-field",{attrs:{autocomplete:s.$root.getHash(),type:s.showPsw3?"text":"password",placeholder:"请确认新密码",maxlength:"6",clearable:""},model:{value:s.form.confirmSecPassword,callback:function(t){s.$set(s.form,"confirmSecPassword",t)},expression:"form.confirmSecPassword"}},[o("van-button",{staticClass:"btn",attrs:{slot:"extra",size:"mini",icon:s.showPsw3?"eye-o":"closed-eye","native-type":"button"},on:{click:function(t){s.showPsw3=!s.showPsw3}},slot:"extra"})],1),o("div",{staticClass:"tip"},[s._v("资金密码为6位纯数字")])],1),o("van-button",{staticClass:"primary block",class:{disabled:!s.form.newSecPassword||!s.form.confirmSecPassword||!!s.$root.userInfo.secPasswordStatus&&!s.form.oldSecPassword},attrs:{"native-type":"submit"}},[s._v(" 确定 ")])],1),o("van-dialog",{staticClass:"warning",attrs:{"show-cancel-button":"","close-on-click-overlay":""},on:{confirm:s.onConfirm},scopedSlots:s._u([{key:"title",fn:function(){return[o("van-icon",{attrs:{name:"fail"}})]},proxy:!0}]),model:{value:s.showFailDialog,callback:function(t){s.showFailDialog=t},expression:"showFailDialog"}},[s._v(" 为保障你的资金安全，资金密码修改后 "),o("span",[s._v("2小时")]),s._v(" 以内不允许交易 ")])],1)},a=[],r=o(3652),i={data(){return{showFailDialog:!1,form:{oldSecPassword:"",newSecPassword:"",confirmSecPassword:""},showPsw:!1,showPsw2:!1,showPsw3:!1}},created(){this.$root.$emit("root:set-topbar",["left-back"]),this.$root.$emit("root:set-title",this.$root.userInfo.secPasswordStatus?" 修改资金密码":"设置资金密码")},methods:{onSubmit(){return/^\d{6}$/.test(this.form.newSecPassword)?this.form.newSecPassword!=this.form.confirmSecPassword?this.$toast.fail("两次输入的密码不一致"):void(this.$root.userInfo.secPasswordStatus?this.showFailDialog=!0:this.onConfirm()):this.$toast.fail("请输入6位数字资金密码")},onConfirm(){this.$root.userInfo.secPasswordStatus?(0,r.IG)({oldSecPassword:this.form.oldSecPassword,newSecPassword:this.form.newSecPassword}).then((({ok:s,msg:t})=>{s?(this.$toast.success(t),this.$router.back()):this.$toast.fail(t)})):(0,r.MC)({securePassword:this.form.newSecPassword}).then((({ok:s,msg:t})=>{s?(this.$root.userInfo.secPasswordStatus=!0,this.$toast.success(t),this.$router.back()):this.$toast.fail(t)}))}}},n=i,c=o(1001),l=(0,c.Z)(n,e,a,!1,null,null,null),w=l.exports}}]);