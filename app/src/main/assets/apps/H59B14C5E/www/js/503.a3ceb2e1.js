"use strict";(self["webpackChunkez_pay"]=self["webpackChunkez_pay"]||[]).push([[503],{3698:function(t,e,a){a.r(e),a.d(e,{default:function(){return m}});var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page graybg page-my_hang_orders"},[a("van-dropdown-menu",{staticClass:"border_bottom_1px"},[a("van-dropdown-item",{ref:"payment_method",attrs:{title:"收款方式"}},[a("van-cell",{staticClass:"selections",attrs:{border:!1}},[a("van-checkbox-group",{model:{value:t.query.paymentType,callback:function(e){t.$set(t.query,"paymentType",e)},expression:"query.paymentType"}},[a("van-checkbox",{staticClass:"btn",attrs:{name:t.PAYMENT_METHOD.BANK}},[a("van-button",{staticClass:"btn",attrs:{slot:"icon"},slot:"icon"},[t._v(" 银行卡转账 ")])],1),a("van-checkbox",{staticClass:"btn",attrs:{name:t.PAYMENT_METHOD.WE_CHAT}},[a("van-button",{staticClass:"btn",attrs:{slot:"icon"},slot:"icon"},[t._v(" 微信转账 ")])],1),a("van-checkbox",{staticClass:"btn",attrs:{name:t.PAYMENT_METHOD.ALI}},[a("van-button",{staticClass:"btn",attrs:{slot:"icon"},slot:"icon"},[t._v(" 支付宝转账 ")])],1)],1)],1),a("van-cell",{staticClass:"btns"},[a("van-button",{staticClass:"cancel",attrs:{type:"danger"},on:{click:t.resetPaymentMethod}},[t._v(" 重置 ")]),a("van-button",{staticClass:"confirm",attrs:{type:"primary"},on:{click:function(e){return t.load("payment_method")}}},[t._v(" 确定 ")])],1)],1),a("van-dropdown-item",{ref:"status",attrs:{title:"状态"}},[a("van-cell",{staticClass:"selections",attrs:{border:!1}},[a("div",{staticClass:"group"},[a("van-checkbox",{staticClass:"btn",model:{value:t.query.isTransacting,callback:function(e){t.$set(t.query,"isTransacting",e)},expression:"query.isTransacting"}},[a("van-button",{staticClass:"btn",attrs:{slot:"icon"},slot:"icon"},[t._v(" 已发起交易 ")])],1),a("van-checkbox",{staticClass:"btn",model:{value:t.query.isHanging,callback:function(e){t.$set(t.query,"isHanging",e)},expression:"query.isHanging"}},[a("van-button",{staticClass:"btn",attrs:{slot:"icon"},slot:"icon"},[t._v(" 挂单中 ")])],1)],1)]),a("van-cell",{staticClass:"btns"},[a("van-button",{staticClass:"cancel",attrs:{type:"danger"},on:{click:t.resetStatus}},[t._v(" 重置 ")]),a("van-button",{staticClass:"confirm",attrs:{type:"primary"},on:{click:function(e){return t.load("status")}}},[t._v(" 确定 ")])],1)],1),a("van-dropdown-item",{ref:"split_status",attrs:{title:"是否可拆分"}},[a("van-cell",{staticClass:"selections",attrs:{border:!1}},[a("van-radio-group",{on:{change:function(e){return t.onChangeSplitStatus(e)}},model:{value:t.query.isSplit,callback:function(e){t.$set(t.query,"isSplit",e)},expression:"query.isSplit"}},[a("van-radio",{staticClass:"btn",attrs:{name:1}},[a("van-button",{staticClass:"btn",attrs:{slot:"icon"},on:{click:function(e){return t.cancelSelect(1)}},slot:"icon"},[t._v(" 可拆分 ")])],1),a("van-radio",{staticClass:"btn",attrs:{name:0}},[a("van-button",{staticClass:"btn",attrs:{slot:"icon"},on:{click:function(e){return t.cancelSelect(0)}},slot:"icon"},[t._v(" 不可拆分 ")])],1)],1)],1)],1)],1),a("van-list",{attrs:{error:t.error,finished:t.finished,"error-text":t.errorText,"finished-text":"暂无更多数据"},on:{"update:error":function(e){t.error=e},load:t.search},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,(function(t,e){return a("HangOrderItem",{key:e,attrs:{dt:t}})})),1)],1)},s=[],n=a(7738),i=a(1380),o=a(5628),l=a(6163),u={components:{HangOrderItem:n.K},data(){return{PAYMENT_METHOD:o.hL,list:[],loading:!1,error:!1,finished:!1,errorText:"加载失败，点击重试",page:1,pageSize:20,query:{isTransacting:!1,isHanging:!1,isSplit:"",paymentType:[]}}},watch:{query:{deep:!0,handler(){this.page=1,this.list=[]}}},created(){this.$root.$emit("root:set-topbar",["left-back","notices","customer-service"])},methods:{search(){(0,i.$Z)(this.$tls.processParams({page:this.page,pageSize:this.pageSize,isSplit:this.query.isSplit,paymentType:this.query.paymentType.reduce(((t,e)=>t+e),0),inProgress:this.query.isTransacting?1:"",status:this.query.isHanging?1:""},["shake"])).then((({ok:t,data:e,msg:a})=>{this.loading=!1,t?(1==this.page?this.list=e.list||[]:this.list.push(...e.list||[]),this.finished=this.page*this.pageSize>=e.total,this.page+=1):(this.error=!0,this.errorText=a)}))},resetPaymentMethod(){this.query.paymentType=[],this.load("payment_method")},resetStatus(){this.query.isTransacting=!1,this.query.isHanging=!1,this.load("status")},load(t){this.page=1,this.$refs[t].toggle(!1),this.search()},onChangeSplitStatus(t){l.ZP.isNumber(t)&&this.load("split_status")},cancelSelect(t){this.query.isSplit===t&&setTimeout((()=>{this.query.isSplit="",this.load("split_status")}),50)}}},c=u,d=a(1001),p=(0,d.Z)(c,r,s,!1,null,null,null),m=p.exports},1380:function(t,e,a){a.d(e,{$Z:function(){return l},$i:function(){return o},CI:function(){return y},Ej:function(){return g},Hn:function(){return c},N8:function(){return f},R9:function(){return C},T7:function(){return b},XW:function(){return v},_H:function(){return s},_d:function(){return _},an:function(){return m},cf:function(){return p},dF:function(){return d},fW:function(){return u},l$:function(){return O},uF:function(){return n},v1:function(){return i},vi:function(){return h},y6:function(){return T}});var r=a(1922);const s=t=>(0,r.q)({url:"/Api/Market/PendingOrder/marketPendingOrderList",method:"POST",data:t}),n=t=>(0,r.q)({url:"/Api/Market/Order/myOrderList",method:"GET",data:t}),i=t=>(0,r.q)({url:"/Api/Market/Sell/index",method:"POST",data:t}),o=t=>(0,r.q)({url:"/Api/Market/Sell/recycle",method:"POST",data:t}),l=t=>(0,r.q)({url:"Api/Market/PendingOrder/myPendingOrderList",method:"POST",data:t}),u=t=>(0,r.q)({url:"/Api/Market/Order/myOrderDetail",method:"GET",data:t}),c=t=>(0,r.q)({url:"/Api/Market/PendingOrder/marketPendingOrderDetail",method:"POST",data:t}),d=t=>(0,r.q)({url:"/Api/Market/Order/getCurrentOrderStatus",method:"GET",data:t}),p=t=>(0,r.q)({url:"/Api/Market/PendingOrder/myPendingOrderDetail",method:"GET",data:t}),m=t=>(0,r.q)({url:"/Api/Market/Order/buyerCreatesOrder",method:"POST",data:t}),h=t=>(0,r.q)({url:"/Api/Market/PendingOrder/getOrderListByPendingOrder",method:"GET",data:t}),y=t=>(0,r.q)({url:"/Api/Market/Order/sellerRefusesToCreateOrder",method:"POST",data:t}),f=t=>(0,r.q)({url:"/Api/Market/Order/sellerConfirmsToCreateOrder",method:"POST",data:t}),g=t=>(0,r.q)({url:"/Api/Market/Order/sellerHasNotReceivedPayment",method:"POST",data:t}),v=t=>(0,r.q)({url:"/Api/Market/Order/sellerCompletesOrder",method:"POST",data:t}),_=t=>(0,r.q)({url:"/Api/Market/Order/buyerCancelsOrder",method:"POST",data:t}),O=t=>(0,r.q)({url:"/Api/Market/Order/buyerConfirmsOrderHasBeenPaid",method:"POST",data:t}),C=t=>(0,r.q)({url:"/Api/Market/Order/buyerAppeals",method:"POST",data:t}),T=t=>(0,r.q)({url:"/Api/Market/Order/getCancelsOrderDailyCount",method:"GET",data:t}),b=t=>(0,r.q)({url:"/Api/User/TransferOrder/userDeposit",method:"POST",data:t})},7738:function(t,e,a){a.d(e,{K:function(){return u},A:function(){return y}});var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hang-order",on:{click:function(e){return t.$router.push("/my_hang_order/"+t.dt.pendingOrderId)}}},[a("div",{staticClass:"time"},[t._v(" 挂单时间 "+t._s(t._f("dateFormat")(t.dt.createTime,"M/D h:m:s"))+" ")]),a("div",{staticClass:"content"},[a("span",{staticClass:"payment-method"},t._l(t.payments,(function(t,e){return a("div",{key:e,staticClass:"item",class:"pay"+t})})),0),a("span",{staticClass:"order-type"},[t._v(t._s(t.dt.isSplit?"可拆分":"不可拆分"))]),a("span",{staticClass:"amount"},[t._v(" "+t._s(t._f("amountFormat")(t.dt.amount,{places:0}))+" EzB ")]),a("span",{staticClass:"order-status",class:t.stateClass},[t._v(" "+t._s(t.stateStr)+" ")]),a("van-icon",{attrs:{name:"arrow"}})],1)])},s=[],n={name:"hangOrderItem",props:{dt:{type:Object,default:()=>({createTime:(new Date).toLocaleDateString(),paymentType:7,isSplit:0,amount:"13076598",status:1,underwayOrder:1})}},computed:{stateClass(){return this.dt.underwayOrder>0?"underway":1===this.dt.status?"hanging":0===this.dt.status?"closed":void 0},stateStr(){return this.dt.underwayOrder>0?"已发起交易":1===this.dt.status?"挂单中...":0===this.dt.status?"取消挂单":void 0},payments(){return this.$root.parsePayments(this.dt.paymentType)}},methods:{}},i=n,o=a(1001),l=(0,o.Z)(i,r,s,!1,null,"4d57667a",null),u=l.exports,c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"transaction",on:{click:function(e){return t.$router.push("/"+(t.isSale?"transaction_sale":"transaction_buy")+"/"+t.dt.orderId)}}},[a("span",{staticClass:"inout bg",class:t.isSale?"out":"in"},[t._v(" "+t._s(t.isSale?"卖":"买")+" ")]),a("span",{staticClass:"time"},[t._v(" "+t._s(t.ymd)+" "),a("br"),t._v(" "+t._s(t.hms)+" ")]),a("span",{staticClass:"amountEl"},[a("span",{staticClass:"amount",class:t.isSale?"out":"in"},[t._v(" "+t._s(t._f("amountFormat")(t.dt.amount))+" ")]),a("span",{staticClass:"unit"},[t._v(" EzB ")])]),a("span",{staticClass:"order-status",class:t._f("transactingOrderStatus")(t.dt.status)},[t._v(" "+t._s(t._f("transactingOrderStatus")(t.dt.status,"seller-content"))+" ")])])},d=[],p={name:"TransactionItem",props:{dt:{type:Object,default:()=>({orderType:1,time:(new Date).toLocaleDateString(),amount:"0",orderStatus:"WaitingSellerConfirm"})}},computed:{orderTime(){return this.$options.filters.dateFormat(this.dt.createTime,"Y/M/D h:m:s")},ymd(){return this.orderTime.slice(0,10)},hms(){return this.orderTime.slice(11)},isSale(){return this.dt.sellerId==this.$root.userInfo.userId}}},m=p,h=(0,o.Z)(m,c,d,!1,null,"7189fb62",null),y=h.exports}}]);