"use strict";(self["webpackChunkez_pay"]=self["webpackChunkez_pay"]||[]).push([[847],{32847:function(e,t,o){o.r(t),o.d(t,{default:function(){return d}});var s=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"page page-user-bind-phone"},[o("van-form",{on:{submit:e.onSubmit}},[o("van-field",{attrs:{autocomplete:"new-password",label:"手机号码",maxlength:"11",placeholder:"手机号",type:"tel"},model:{value:e.form.phoneNumber,callback:function(t){e.$set(e.form,"phoneNumber",t)},expression:"form.phoneNumber"}}),o("van-field",{attrs:{autocomplete:"new-password",label:"验证码",placeholder:"短信验证码"},scopedSlots:e._u([{key:"extra",fn:function(){return[o("van-button",{staticClass:"btnGetVerifyCode primary",attrs:{"native-type":"button",size:"small"},on:{click:e.getSmsVerifyCode}},[e.smsCountdown?o("van-count-down",{attrs:{time:e.smsCountdown,"auto-start":"",format:"ss"},on:{finish:function(t){e.smsCountdown=0}}}):[e._v(" 获取验证码")]],2)]},proxy:!0}]),model:{value:e.form.smsCode,callback:function(t){e.$set(e.form,"smsCode",t)},expression:"form.smsCode"}}),o("van-button",{staticClass:"primary block",class:{disabled:!e.form.phoneNumber||!e.form.smsCode}},[e._v(" 确定 ")])],1)],1)},n=[],r=(o(9653),o(74916),o(77601),o(15306),o(19248)),a=o(13652),m=o(63271),u=o.n(m),i={data:function(){return{form:{phoneNumber:"",smsCode:""},smsCountdown:0}},created:function(){this.$root.$emit("root:set-topbar",["left-back"])},methods:{smsCount:function(){var e=this.$st.get("LAST_SMS_REQUEST");if(e){var t=Date.now()-Number(e);t<60&&(this.smsCountdown=1e3*(60-t))}},getSmsVerifyCode:function(){var e=this;this.smsCountdown||(0,r.Z3)({phoneNumber:this.form.phoneNumber,codeType:"bindPhoneNumber"}).then((function(t){var o=t.ok,s=t.msg;t.data;o?(e.$toast.success(s),e.smsCountdown=6e4,e.$st.set("LAST_SMS_REQUEST",Date.now())):e.$toast.fail(s)}))},onSubmit:function(){var e=this;return/^1[3456789]\d{9}$/.test(this.form.phoneNumber)?""===this.form.smsCode?this.$toast.fail("请输入短信验证码"):void(0,a.ED)({phoneNumber:this.form.phoneNumber,smsCode:this.form.smsCode}).then((function(t){var o=t.ok,s=t.msg;o?(u().set("USER_INFO",0),e.$root.userInfo.isEnteredPhoneNumber=1,e.$toast.success(s),e.$root.isBindPwd||e.$dialog.alert({className:"common",message:"请绑定密码",beforeClose:function(t,o){e.$router.replace("/user_pay_psw"),o()}}),e.$router.back()):e.$toast.fail(s)})):this.$toast.fail("请输入合法的手机号码")}}},l=i,f=o(1001),c=(0,f.Z)(l,s,n,!1,null,"31497b2b",null),d=c.exports}}]);