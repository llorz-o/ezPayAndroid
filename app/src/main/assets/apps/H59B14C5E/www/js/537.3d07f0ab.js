"use strict";(self["webpackChunkez_pay"]=self["webpackChunkez_pay"]||[]).push([[537],{76537:function(t,e,n){n.r(e),n.d(e,{default:function(){return f}});var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page page-messages"},[n("van-list",{attrs:{error:t.error,"error-text":t.errorText,finished:t.finished,"finished-text":"暂无更多消息"},on:{"update:error":function(e){t.error=e},load:t.loadList},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,(function(e,r){return n("van-cell",{key:r,class:{disabled:"Read"===e.status},attrs:{title:e.title,label:t._f("dateFormat")(e.createTime,"Y-M-D"),"is-link":"",clickable:""},on:{click:function(){return t.handlerClickMsg(e)}}})})),1)],1)},i=[],a=n(68932),o=(n(21249),n(13652)),s={data:function(){return{loading:!1,error:!1,finished:!1,errorText:"加载失败，点击重试",list:[],page:1,pageSize:20}},created:function(){var t=this;this.$root.$emit("root:set-topbar",["left-back","custom-btn"],{label:"一键已读",onClick:function(){(0,o.Mj)().then((function(e){var n=e.ok,r=e.msg;n?t.list.map((function(t){return t.status="Read",t})):t.$notice.fail(r)}))}})},methods:{loadList:function(){var t=this;(0,o._U)({page:this.page,pageSize:this.pageSize}).then((function(e){var n=e.ok,r=e.data,i=e.msg;if(t.loading=!1,n){var o;if(1===t.page)t.list=r.list||[];else(o=t.list).push.apply(o,(0,a.Z)(r.list||[]));t.finished=t.page*t.pageSize>=r.total,t.page+=1}else t.error=!0,t.errorText=i}))},handlerClickMsg:function(t){var e=this,n=t.status,r=t.contentId,i=t.content;"Unread"===n?(0,o.$h)({contentId:r}).then((function(t){var n=t.ok,r=t.msg;n?(e.$st.set("MSG_CONTENT",i),e.$router.push("/msg_detail")):e.$notice.fail(r)})):(this.$st.set("MSG_CONTENT",i),this.$router.push("/msg_detail"))}}},l=s,u=n(1001),c=(0,u.Z)(l,r,i,!1,null,null,null),f=c.exports},68932:function(t,e,n){n.d(e,{Z:function(){return l}});var r=n(23748);function i(t){if(Array.isArray(t))return(0,r.Z)(t)}n(82526),n(41817),n(41539),n(32165),n(78783),n(33948),n(91038);function a(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}var o=n(48936);n(21703);function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(t){return i(t)||a(t)||(0,o.Z)(t)||s()}}}]);