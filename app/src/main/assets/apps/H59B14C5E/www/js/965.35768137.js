"use strict";(self["webpackChunkez_pay"]=self["webpackChunkez_pay"]||[]).push([[965],{47965:function(t,e,o){o.r(e),o.d(e,{default:function(){return l}});var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"page page-user-bind-phone"},[o("van-form",{on:{submit:t.onSubmit}},[o("van-field",{attrs:{label:"手机号码",autocomplete:"new-password",placeholder:"手机号",type:"tel",maxlength:"11"},model:{value:t.form.phoneNumber,callback:function(e){t.$set(t.form,"phoneNumber",e)},expression:"form.phoneNumber"}}),o("van-field",{attrs:{label:"验证码",autocomplete:"new-password",placeholder:"短信验证码"},scopedSlots:t._u([{key:"extra",fn:function(){return[o("van-button",{staticClass:"btnGetVerifyCode primary",attrs:{size:"small","native-type":"button"},on:{click:t.getSmsVerifyCode}},[t.smsCountdown?o("van-count-down",{attrs:{time:t.smsCountdown,format:"ss","auto-start":""},on:{finish:function(e){t.smsCountdown=0}}}):[t._v(" 获取验证码 ")]],2)]},proxy:!0}]),model:{value:t.form.smsCode,callback:function(e){t.$set(t.form,"smsCode",e)},expression:"form.smsCode"}}),o("van-button",{staticClass:"primary block",class:{disabled:!t.form.phoneNumber||!t.form.smsCode}},[t._v(" 确定 ")])],1)],1)},s=[],r=(o(9653),o(74916),o(77601),o(19248)),a=o(13652),u=o(63271),i=o.n(u),m={data:function(){return{form:{phoneNumber:"",smsCode:""},smsCountdown:0}},created:function(){this.$root.$emit("root:set-topbar",["left-back"])},methods:{smsCount:function(){var t=this.$st.get("LAST_SMS_REQUEST");if(t){var e=Date.now()-Number(t);e<60&&(this.smsCountdown=1e3*(60-e))}},getSmsVerifyCode:function(){var t=this;this.smsCountdown||(0,r.Z3)({phoneNumber:this.form.phoneNumber,codeType:"bindPhoneNumber"}).then((function(e){var o=e.ok,n=e.msg;e.data;o?(t.$toast.success(n),t.smsCountdown=6e4,t.$st.set("LAST_SMS_REQUEST",Date.now())):t.$toast.fail(n)}))},onSubmit:function(){var t=this;return/^1[345789]\d{9}$/.test(this.form.phoneNumber)?""==this.form.smsCode?this.$toast.fail("请输入短信验证码"):void(0,a.ED)({phoneNumber:this.form.phoneNumber,smsCode:this.form.smsCode}).then((function(e){var o=e.ok,n=e.msg;o?(t.isAutoLogin=!1,i().set("USER_INFO",0),t.$root.userInfo.isEnteredPhoneNumber=1,t.$toast.success(n),t.$router.back()):t.$toast.fail(n)})):this.$toast.fail("请输入合法的手机号码")}}},d=m,f=o(1001),c=(0,f.Z)(d,n,s,!1,null,"5b92e67c",null),l=c.exports},19248:function(t,e,o){o.d(e,{Z3:function(){return a},_B:function(){return u},mg:function(){return s},pw:function(){return r}});var n=o(51922),s=function(t){return(0,n.q)({url:"/Api/Common/VerifyCode/getImageCode",method:"POST",data:t})},r=function(t){return(0,n.q)({url:"/Api/Common/VerifyCode/checkVerifyCode",method:"POST",data:t})},a=function(t){return(0,n.q)({url:"/Api/Common/VerifyCode/sendCode",method:"POST",data:t})},u=function(t){return(0,n.q)({url:"/Api/User/UploadFile/uploadBase64Img",method:"POST",data:t})}}}]);