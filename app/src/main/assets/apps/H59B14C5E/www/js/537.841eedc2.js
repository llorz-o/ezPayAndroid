"use strict";(self["webpackChunkez_pay"]=self["webpackChunkez_pay"]||[]).push([[537],{6537:function(t,e,s){s.r(e),s.d(e,{default:function(){return d}});var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page page-messages"},[s("van-list",{attrs:{error:t.error,"error-text":t.errorText,finished:t.finished,"finished-text":"暂无更多消息"},on:{"update:error":function(e){t.error=e},load:t.loadList},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,(function(e,i){return s("van-cell",{key:i,class:{disabled:"Read"===e.status},attrs:{title:e.title,label:t._f("dateFormat")(e.createTime,"Y-M-D"),"is-link":"",clickable:""},on:{click:function(){return t.handlerClickMsg(e)}}})})),1)],1)},a=[],r=s(3652),l={data(){return{loading:!1,error:!1,finished:!1,errorText:"加载失败，点击重试",list:[],page:1,pageSize:20}},created(){this.$root.$emit("root:set-topbar",["left-back","custom-btn"],{label:"一键已读",onClick:()=>{(0,r.Mj)().then((({ok:t,msg:e})=>{t?this.list.map((t=>(t.status="Read",t))):this.$notice.fail(e)}))}})},methods:{loadList(){(0,r._U)({page:this.page,pageSize:this.pageSize}).then((({ok:t,data:e,msg:s})=>{this.loading=!1,t?(1===this.page?this.list=e.list||[]:this.list.push(...e.list||[]),this.finished=this.page*this.pageSize>=e.total,this.page+=1):(this.error=!0,this.errorText=s)}))},handlerClickMsg({status:t,contentId:e,content:s}){"Unread"===t?(0,r.$h)({contentId:e}).then((({ok:t,msg:e})=>{t?(this.$st.set("MSG_CONTENT",s),this.$router.push("/msg_detail")):this.$notice.fail(e)})):(this.$st.set("MSG_CONTENT",s),this.$router.push("/msg_detail"))}}},n=l,o=s(1001),h=(0,o.Z)(n,i,a,!1,null,null,null),d=h.exports}}]);