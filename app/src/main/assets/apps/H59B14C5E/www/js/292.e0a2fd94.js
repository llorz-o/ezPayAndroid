"use strict";(self["webpackChunkez_pay"]=self["webpackChunkez_pay"]||[]).push([[292],{62034:function(t,e,r){r.d(e,{Z:function(){return u}});var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"level"},t._l(5,(function(e){var n;return r("div",{key:e,staticClass:"grade mini",class:(n={},n["g"+t.largeLevel+((5==e?0==t.levelModel:t.levelModel>=e||0==t.levelModel)?"l":"")]=!0,n)})})),0)},a=[],i=(r(9653),{name:"Level",props:{level:{type:Number,default:1}},computed:{levelModel:function(){return this.level%5},largeLevel:function(){return this.levelModel>=1?(this.level-this.levelModel)/5+1:this.level/5}}}),s=i,o=r(1001),l=(0,o.Z)(s,n,a,!1,null,null,null),u=l.exports},29514:function(t,e,r){r.d(e,{Z:function(){return u}});var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"virtual-payment"},[r("div",{staticClass:"icon",class:t.type}),r("div",{staticClass:"info"},[r("div",[t._v("姓名："+t._s(t._f("safeRealName")(t.realName)))])]),r("van-image",{staticClass:"qr",attrs:{src:t.$root.getImageUrl(t.receiptCode)}})],1)},a=[],i={name:"VirtualPayment",props:{type:String,realName:String,receiptCode:String}},s=i,o=r(1001),l=(0,o.Z)(s,n,a,!1,null,null,null),u=l.exports},27292:function(t,e,r){r.r(e),r.d(e,{default:function(){return y}});var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"page page-buy"},[r("div",{staticClass:"top-wrapper"},[r("div",{staticClass:"merchant",class:{split:!!t.orderInfo.isSplit}},[r("div",{staticClass:"left"},[r("van-image",{staticClass:"avatar",attrs:{src:t.$root.getImageUrl(t.orderInfo.sellerAvatar),round:""}},[r("div",{staticClass:"defaultAvatar size45",attrs:{slot:"error"},slot:"error"})]),r("div",{staticClass:"seller-info"},[r("div",{staticClass:"name"},[t._v(t._s(t.orderInfo.sellerNickname))]),r("Level",{attrs:{level:t.orderInfo.sellerCreditLevel}})],1)],1),r("div",{staticClass:"right"},[r("div",{staticClass:"label"},[t._v("可购买总额（V币）")]),r("div",{staticClass:"amount"},[t._v(t._s(t.orderInfo.validAmount))])])])]),r("div",{staticClass:"seller-credit-indicator"},[r("div",{staticClass:"title"},[t._v("卖方信用资讯")]),r("div",{staticClass:"row"},[r("div",{staticClass:"col"},[r("div",{staticClass:"label"},[t._v(t._s(t.orderInfo.sellerIndicator.range)+"日成单数")]),r("div",{staticClass:"value"},[r("span",{staticClass:"bold"},[t._v(" "+t._s(t.orderInfo.sellerIndicator.totalSuccessfulOrder)+" ")])])]),r("div",{staticClass:"col"},[r("div",{staticClass:"label"},[t._v(t._s(t.orderInfo.sellerIndicator.range)+"日成单率")]),r("div",{staticClass:"value"},[r("span",{staticClass:"bold"},[t._v(" "+t._s(t.orderInfo.sellerIndicator.totalSuccessRate)+"% ")])])])]),r("div",{staticClass:"row"},[r("div",{staticClass:"col"},[r("div",{staticClass:"label"},[t._v(" "+t._s(t.orderInfo.sellerIndicator.range)+"日平均放币时间 ")]),r("div",{staticClass:"value"},[t._v(" < "),r("span",{staticClass:"bold"},[t._v(" "+t._s(t.orderInfo.sellerIndicator.sellerAvgTime)+" ")]),t._v(" 分钟 ")])]),r("div",{staticClass:"col"},[r("div",{staticClass:"label"},[t._v(" "+t._s(t.orderInfo.sellerIndicator.range)+"日平均付款时间 ")]),r("div",{staticClass:"value"},[t._v(" < "),r("span",{staticClass:"bold"},[t._v(" "+t._s(t.orderInfo.sellerIndicator.buyerAvgTime)+" ")]),t._v(" 分钟 ")])])]),r("div",{staticClass:"row"},[r("div",{staticClass:"col"},[r("div",{staticClass:"label"},[t._v("买单")]),r("div",{staticClass:"value"},[r("span",{staticClass:"bold"},[t._v(" "+t._s(t.orderInfo.sellerIndicator.buyerOrder)+" ")]),t._v(" 笔 ")])]),r("div",{staticClass:"col"},[r("div",{staticClass:"label"},[t._v("卖单")]),r("div",{staticClass:"value"},[r("span",{staticClass:"bold"},[t._v(" "+t._s(t.orderInfo.sellerIndicator.sellerOrder)+" ")]),t._v(" 笔 ")])])])]),r("van-form",{staticClass:"gray-8",on:{submit:t.onSubmit}},[r("van-field",{attrs:{autocomplete:"new-password",type:"number",label:"购买数量：",readonly:!t.orderInfo.isSplit,placeholder:t.orderInfo.minBuyEach+"～"+t.orderInfo.validAmount+"/V币"},model:{value:t.form.amount,callback:function(e){t.$set(t.form,"amount",e)},expression:"form.amount"}}),r("van-cell",{staticClass:"payment",attrs:{title:"支付方式："}},[r("van-radio-group",{model:{value:t.form.paymentType,callback:function(e){t.$set(t.form,"paymentType",e)},expression:"form.paymentType"}},t._l(t.payments,(function(e,n){return r("van-radio",{key:n,staticClass:"btn",attrs:{disabled:!t.$root.validPayments[e],name:e}},[r("van-button",{staticClass:"btn",attrs:{slot:"icon","native-type":"button"},slot:"icon"},[r("span",{staticClass:"item",class:"pay"+e}),t._v(" "+t._s(t._f("paymentMethod")(e,"content"))+" ")])],1)})),1)],1),r("van-cell",[r("van-radio-group",{model:{value:t.form.buyerPaymentTypeId,callback:function(e){t.$set(t.form,"buyerPaymentTypeId",e)},expression:"form.buyerPaymentTypeId"}},[t._l(t.paymentChannel,(function(e,n){return[t.form.paymentType===t.PAYMENT_METHOD.BANK?[r("van-cell",{key:n,staticClass:"paymentChannel",attrs:{title:t.bankIdMappingName[e.bankId],value:t._f("safeBankNumber")(e.bankNo)},on:{click:function(r){t.form.buyerPaymentTypeId=e.id}},scopedSlots:t._u([{key:"right-icon",fn:function(){return[r("van-radio",{attrs:{name:e.id}})]},proxy:!0}],null,!0)})]:[r("VirtualPayment",t._b({key:n,attrs:{type:t._f("paymentMethod")(t.form.paymentType)}},"VirtualPayment",e,!1))]]}))],2)],1),r("van-button",{staticClass:"primary block",attrs:{"native-type":"submit"}},[t._v(" 确定购买 ")]),r("p",{staticClass:"tip"},[t._v("确认购买后如未自动跳转请到交易记录中查看我的买单")])],1)],1)},a=[],i=r(23796),s=r(4367),o=r(75200),l=(r(69826),r(41539),r(21249),r(69720),r(39714),r(74916),r(15306),r(54747),r(75628)),u=r(21380),d=r(62034),c=r(29514),m={components:{Level:d.Z,VirtualPayment:c.Z},data:function(){return{PAYMENT_METHOD:l.hL,form:{amount:"",buyerPaymentTypeId:"",paymentType:""},orderInfo:{sellerIndicator:{}}}},computed:{payments:function(){return this.$root.parsePayments(this.orderInfo.paymentType)},paymentChannel:function(){var t=this;return(Object.entries(this.$root.payments).map((function(t){var e=(0,o.Z)(t,2),r=(e[0],e[1]);return r})).find((function(e){return e.type===t.form.paymentType}))||{}).list||[]},bankIdMappingName:function(){return this.$root.banks.reduce((function(t,e){return(0,s.Z)((0,s.Z)({},t),{},(0,i.Z)({},e.bankId,e.bankName))}),{})}},watch:{"form.paymentType":function(t){t!=l.hL.ALI&&t!=l.hL.WE_CHAT||(this.form.buyerPaymentTypeId=this.paymentChannel[0].id)}},created:function(){this.$root.loadPayments(),this.loadOrderInfo(this.$route.params.id),this.$root.$emit("root:set-topbar",["left-back","customer-service"])},methods:{onSubmit:function(){var t=this;return this.form.amount?this.form.amount.toNumber()<this.orderInfo.minBuyEach.toNumber()?this.$toast.fail("购买数额不得小于最低可购买额".concat(this.orderInfo.minBuyEach)):this.form.amount.toNumber()>this.orderInfo.validAmount.toNumber()?this.$toast.fail("购买数额不得大于最高可购买额".concat(this.orderInfo.minBuyEach)):this.form.paymentType?this.form.buyerPaymentTypeId?void(0,u.an)(this.$root.$tls.processParams({pendingOrderId:this.orderInfo.pendingOrderId.toString(),amount:this.form.amount.toNumber(),buyerPaymentTypeId:this.form.buyerPaymentTypeId.toString(),paymentType:this.form.paymentType.toString()},["float","shake"])).then((function(e){var r=e.ok,n=e.data,a=e.msg;r?t.$router.replace("/transaction_buy/".concat(n.orderId)):t.$toast.fail(a)})):this.$toast.fail("请选择支付账号"):this.$toast.fail("请选择支付方式"):this.$toast.fail("请输入购买数额")},loadOrderInfo:function(t){var e=this;(0,u.Hn)({pendingOrderId:t}).then((function(t){var r=t.ok,n=t.msg,a=t.data;if(r){a.isSplit||(e.form.amount=a.validAmount),e.orderInfo=a;var i=function(){e.payments.forEach((function(t){e.$root.validPayments[t]&&(e.form.paymentType=t)})),e.form.paymentType||e.warnning()};e.$root.isBindAnyPayment?i():e.$root.loadPayments().then((function(t){var e=t.ok;return e&&i()}))}else e.$toast.fail(n)}))},warnning:function(){var t=this;this.$dialog.confirm({message:"您还未绑定该支付方式的支付账号,请绑定对应支付账号后再选择该支付方式",confirmButtonText:"去绑定",showCancelButton:!0,beforeClose:function(e,r){"confirm"===e&&t.$router.replace("/add_payment"),r()}})}}},f=m,p=r(1001),v=(0,p.Z)(f,n,a,!1,null,null,null),y=v.exports},21380:function(t,e,r){r.d(e,{$Z:function(){return l},$i:function(){return o},CI:function(){return v},Ej:function(){return h},Hn:function(){return d},N8:function(){return y},R9:function(){return I},T7:function(){return T},XW:function(){return C},_H:function(){return a},_d:function(){return b},an:function(){return f},cf:function(){return m},dF:function(){return c},fW:function(){return u},l$:function(){return _},uF:function(){return i},v1:function(){return s},vi:function(){return p},y6:function(){return O}});var n=r(51922),a=function(t){return(0,n.q)({url:"/Api/Market/PendingOrder/marketPendingOrderList",method:"POST",data:t})},i=function(t){return(0,n.q)({url:"/Api/Market/Order/myOrderList",method:"GET",data:t})},s=function(t){return(0,n.q)({url:"/Api/Market/Sell/index",method:"POST",data:t})},o=function(t){return(0,n.q)({url:"/Api/Market/Sell/recycle",method:"POST",data:t})},l=function(t){return(0,n.q)({url:"Api/Market/PendingOrder/myPendingOrderList",method:"POST",data:t})},u=function(t){return(0,n.q)({url:"/Api/Market/Order/myOrderDetail",method:"GET",data:t})},d=function(t){return(0,n.q)({url:"/Api/Market/PendingOrder/marketPendingOrderDetail",method:"POST",data:t})},c=function(t){return(0,n.q)({url:"/Api/Market/Order/getCurrentOrderStatus",method:"GET",data:t})},m=function(t){return(0,n.q)({url:"/Api/Market/PendingOrder/myPendingOrderDetail",method:"GET",data:t})},f=function(t){return(0,n.q)({url:"/Api/Market/Order/buyerCreatesOrder",method:"POST",data:t})},p=function(t){return(0,n.q)({url:"/Api/Market/PendingOrder/getOrderListByPendingOrder",method:"GET",data:t})},v=function(t){return(0,n.q)({url:"/Api/Market/Order/sellerRefusesToCreateOrder",method:"POST",data:t})},y=function(t){return(0,n.q)({url:"/Api/Market/Order/sellerConfirmsToCreateOrder",method:"POST",data:t})},h=function(t){return(0,n.q)({url:"/Api/Market/Order/sellerHasNotReceivedPayment",method:"POST",data:t})},C=function(t){return(0,n.q)({url:"/Api/Market/Order/sellerCompletesOrder",method:"POST",data:t})},b=function(t){return(0,n.q)({url:"/Api/Market/Order/buyerCancelsOrder",method:"POST",data:t})},_=function(t){return(0,n.q)({url:"/Api/Market/Order/buyerConfirmsOrderHasBeenPaid",method:"POST",data:t})},I=function(t){return(0,n.q)({url:"/Api/Market/Order/buyerAppeals",method:"POST",data:t})},O=function(t){return(0,n.q)({url:"/Api/Market/Order/getCancelsOrderDailyCount",method:"GET",data:t})},T=function(t){return(0,n.q)({url:"/Api/User/TransferOrder/userDeposit",method:"POST",data:t})}}}]);