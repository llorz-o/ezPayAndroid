"use strict";(self["webpackChunkez_pay"]=self["webpackChunkez_pay"]||[]).push([[490],{2490:function(t,e,r){r.r(e),r.d(e,{default:function(){return y}});var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"page graybg page-transaction"},[t._m(0),r("van-dropdown-menu",{staticClass:"border_bottom_1px"},[r("van-dropdown-item",{ref:"amount",attrs:{title:"金额"}},[r("van-cell",{attrs:{border:!1}},[r("van-field",{staticClass:"amount_field",attrs:{autocomplete:t.$root.getHash(),placeholder:"请输入总额"},scopedSlots:t._u([{key:"extra",fn:function(){return[r("span",[t._v(" EzB ")])]},proxy:!0}]),model:{value:t.query.amount,callback:function(e){t.$set(t.query,"amount",e)},expression:"query.amount"}})],1),r("van-cell",{staticClass:"btns"},[r("van-button",{staticClass:"cancel",attrs:{type:"danger"},on:{click:t.resetAmount}},[t._v(" 重置 ")]),r("van-button",{staticClass:"confirm",attrs:{type:"primary"},on:{click:function(e){return t.load("amount")}}},[t._v(" 确定 ")])],1)],1),r("van-dropdown-item",{ref:"payment_method",attrs:{title:"交易方式"}},[r("van-cell",{staticClass:"selections",attrs:{border:!1}},[r("van-checkbox-group",{model:{value:t.query.payment_method,callback:function(e){t.$set(t.query,"payment_method",e)},expression:"query.payment_method"}},[r("van-checkbox",{staticClass:"btn",attrs:{name:t.PAYMENT_METHOD.BANK}},[r("van-button",{staticClass:"btn",attrs:{slot:"icon"},on:{click:function(){return t.clearSelect("payment_method",t.PAYMENT_METHOD.BANK)}},slot:"icon"},[t._v(" 银行卡转账 ")])],1),r("van-checkbox",{staticClass:"btn",attrs:{name:t.PAYMENT_METHOD.WE_CHAT}},[r("van-button",{staticClass:"btn",attrs:{slot:"icon"},on:{click:function(){return t.clearSelect("payment_method",t.PAYMENT_METHOD.WE_CHAT)}},slot:"icon"},[t._v(" 微信转账 ")])],1),r("van-checkbox",{staticClass:"btn",attrs:{name:t.PAYMENT_METHOD.ALI}},[r("van-button",{staticClass:"btn",attrs:{slot:"icon"},on:{click:function(){return t.clearSelect("payment_method",t.PAYMENT_METHOD.ALI)}},slot:"icon"},[t._v(" 支付宝转账 ")])],1)],1)],1),r("van-cell",{staticClass:"btns"},[r("van-button",{staticClass:"cancel",attrs:{type:"danger"},on:{click:t.resetPaymentMethod}},[t._v(" 重置 ")]),r("van-button",{staticClass:"confirm",attrs:{type:"primary"},on:{click:function(e){return t.load("payment_method")}}},[t._v(" 确定 ")])],1),r("div",{staticClass:"tip"},[t._v("仅显示可用的交易方式")])],1),r("van-dropdown-item",{ref:"split_status",attrs:{title:"是否可拆分"}},[r("van-cell",{staticClass:"selections",attrs:{border:!1}},[r("van-radio-group",{on:{change:function(e){return t.onChange(e,"split_status")}},model:{value:t.query.split_status,callback:function(e){t.$set(t.query,"split_status",e)},expression:"query.split_status"}},[r("van-radio",{staticClass:"btn",attrs:{name:1}},[r("van-button",{staticClass:"btn",attrs:{slot:"icon"},on:{click:function(){return t.clearSelect("split_status",1,!0)}},slot:"icon"},[t._v(" 可拆分 ")])],1),r("van-radio",{staticClass:"btn",attrs:{name:0}},[r("van-button",{staticClass:"btn",attrs:{slot:"icon"},on:{click:function(){return t.clearSelect("split_status",0,!0)}},slot:"icon"},[t._v(" 不可拆分 ")])],1)],1)],1)],1)],1),r("van-list",{attrs:{error:t.error,finished:t.finished,"error-text":t.errorText,"finished-text":"暂无更多数据"},on:{"update:error":function(e){t.error=e},load:t.search},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,(function(t,e){return r("TransactionItem",{key:e,attrs:{dt:t}})})),1)],1)},s=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"tip_card"},[r("div",{staticClass:"tips"},[r("h3",[t._v("交易须知")]),r("p",[t._v("1.交易过程中实时留意订单状态，十分钟内完成")]),r("p",[t._v("2.购买时，付款成功后立即上传成功截图并点击「我已转账」")]),r("p",[t._v("3.出售时务必确定收到款项再进行打币")]),r("p",[t._v("4.订单出现异议第一时间点击右上角申请人工介入")]),r("p",[t._v("5.未按规定操作，平台不承担任何责任")])])])}],n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"transaction border_bottom_1px"},[r("van-image",{staticClass:"avatar",attrs:{src:t.$root.getImageUrl(t.dt.sellerAvatar),round:""}},[r("div",{staticClass:"defaultAvatar size40",attrs:{slot:"error"},slot:"error"})]),r("div",{staticClass:"amountBox"},[r("div",{staticClass:"amountLabel"},[t._v("数量")]),r("div",{staticClass:"amount"},[r("div",{staticClass:"val"},[t._v(" "+t._s(parseFloat(t.dt.validAmount).toFixed(0))+" ")]),r("div",{staticClass:"unit"},[t._v("EzB")])])]),r("div",{staticClass:"payment-method"},t._l(t.payments,(function(t,e){return r("div",{key:e,staticClass:"item",class:"pay"+t})})),0),r("div",{staticClass:"split-status"},[t._v(" "+t._s(t._f("orderSplitStatus")(t.dt.isSplit,"content"))+" ")]),r("div",{staticClass:"btnWrapper"},[t.dt.sellerId!==t.$root.userInfo.userId?r("van-button",{staticClass:"btn",attrs:{to:"/buy/"+t.dt.pendingOrderId}},[t._v(" 购买 ")]):t._e()],1)],1)},i=[],o={name:"TransactionItem",props:{dt:{type:Object,default:()=>({avatar:"",amount:"0",paymentType:1,isSplit:1})}},computed:{payments(){return this.$root.parsePayments(this.dt.paymentType)}}},l=o,u=r(1001),c=(0,u.Z)(l,n,i,!1,null,"c15c934a",null),d=c.exports,p=r(1380),m=r(5628),h=r(6163),v={components:{TransactionItem:d},data(){return{PAYMENT_METHOD:m.hL,query:{amount:"",payment_method:[],split_status:""},page:1,pageSize:20,list:[],loading:!1,error:!1,errorText:"加载失败，点击重试",finished:!1}},watch:{query:{deep:!0,handler(){this.page=1}}},created(){this.$root.updateUnReadCount(),this.$root.$emit("root:set-topbar",["notices","customer-service"]),this.$root.$emit("root:set-layout",{bottom:!0})},methods:{search(){(0,p._H)(this.$tls.processParams({page:this.page.toString(),pageSize:this.pageSize.toString(),amount:this.$tls.isEmpty(this.query.amount)?"":this.query.amount.toNumber(),isSplit:this.query.split_status.toString(),paymentType:this.query.payment_method.reduce(((t,e)=>t+e),0).toString()},["shake","float"])).then((({ok:t,data:e,msg:r})=>{this.loading=!1,t?(1==this.page?this.list=e.list||[]:this.list.push(...e.list||[]),this.finished=this.page*this.pageSize>=e.total,this.page+=1):(this.error=!0,this.errorText=r)}))},resetAmount(){this.page=1,this.query.amount="",this.search(),this.$refs.amount.toggle(!1)},resetPaymentMethod(){this.page=1,this.query.payment_method=[],this.search(),this.$refs.payment_method.toggle(!1)},clearSelect(t,e,r){const a=this.query[t];a===e&&setTimeout((()=>{this.query[t]="",r&&(this.page=1,this.search(),this.$refs[t].toggle(!1))}),50)},load(t){this.$refs[t].toggle(!1),this.search()},onChange(t,e){h.ZP.isNumber(t)&&(this.page=1,this.search(),this.$refs[e].toggle(!1))}}},f=v,_=(0,u.Z)(f,a,s,!1,null,null,null),y=_.exports},1380:function(t,e,r){r.d(e,{$Z:function(){return l},$i:function(){return o},CI:function(){return v},Ej:function(){return _},Hn:function(){return c},N8:function(){return f},R9:function(){return C},T7:function(){return T},XW:function(){return y},_H:function(){return s},_d:function(){return g},an:function(){return m},cf:function(){return p},dF:function(){return d},fW:function(){return u},l$:function(){return O},uF:function(){return n},v1:function(){return i},vi:function(){return h},y6:function(){return b}});var a=r(1922);const s=t=>(0,a.q)({url:"/Api/Market/PendingOrder/marketPendingOrderList",method:"POST",data:t}),n=t=>(0,a.q)({url:"/Api/Market/Order/myOrderList",method:"GET",data:t}),i=t=>(0,a.q)({url:"/Api/Market/Sell/index",method:"POST",data:t}),o=t=>(0,a.q)({url:"/Api/Market/Sell/recycle",method:"POST",data:t}),l=t=>(0,a.q)({url:"Api/Market/PendingOrder/myPendingOrderList",method:"POST",data:t}),u=t=>(0,a.q)({url:"/Api/Market/Order/myOrderDetail",method:"GET",data:t}),c=t=>(0,a.q)({url:"/Api/Market/PendingOrder/marketPendingOrderDetail",method:"POST",data:t}),d=t=>(0,a.q)({url:"/Api/Market/Order/getCurrentOrderStatus",method:"GET",data:t}),p=t=>(0,a.q)({url:"/Api/Market/PendingOrder/myPendingOrderDetail",method:"GET",data:t}),m=t=>(0,a.q)({url:"/Api/Market/Order/buyerCreatesOrder",method:"POST",data:t}),h=t=>(0,a.q)({url:"/Api/Market/PendingOrder/getOrderListByPendingOrder",method:"GET",data:t}),v=t=>(0,a.q)({url:"/Api/Market/Order/sellerRefusesToCreateOrder",method:"POST",data:t}),f=t=>(0,a.q)({url:"/Api/Market/Order/sellerConfirmsToCreateOrder",method:"POST",data:t}),_=t=>(0,a.q)({url:"/Api/Market/Order/sellerHasNotReceivedPayment",method:"POST",data:t}),y=t=>(0,a.q)({url:"/Api/Market/Order/sellerCompletesOrder",method:"POST",data:t}),g=t=>(0,a.q)({url:"/Api/Market/Order/buyerCancelsOrder",method:"POST",data:t}),O=t=>(0,a.q)({url:"/Api/Market/Order/buyerConfirmsOrderHasBeenPaid",method:"POST",data:t}),C=t=>(0,a.q)({url:"/Api/Market/Order/buyerAppeals",method:"POST",data:t}),b=t=>(0,a.q)({url:"/Api/Market/Order/getCancelsOrderDailyCount",method:"GET",data:t}),T=t=>(0,a.q)({url:"/Api/User/TransferOrder/userDeposit",method:"POST",data:t})}}]);