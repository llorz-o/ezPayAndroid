"use strict";(self["webpackChunkez_pay"]=self["webpackChunkez_pay"]||[]).push([[698],{2698:function(t,e,r){r.r(e),r.d(e,{default:function(){return m}});var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"page graybg page-orders"},[r("van-tabs",{attrs:{border:"",sticky:"","offset-top":"12.267vw"},model:{value:t.form.identity,callback:function(e){t.$set(t.form,"identity",e)},expression:"form.identity"}},[t._l(t.tabs,(function(e,a){return r("van-tab",{key:a,attrs:{title:e.title,name:a}},[r("van-list",{ref:a,refInFor:!0,attrs:{error:e.error,finished:e.finished,"error-text":e.errorText,"finished-text":e.finishedText},on:{"update:error":function(r){return t.$set(e,"error",r)},load:function(){return t.loadList(a)}},model:{value:e.loading,callback:function(r){t.$set(e,"loading",r)},expression:"v.loading"}},t._l(e.list,(function(t,e){return r("TransactionItem",{key:e,attrs:{dt:t}})})),1)],1)})),r("van-tab",{attrs:{title:"筛选",name:"filter"},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" 筛选 "),r("van-icon",{attrs:{name:"filter-o"}})]},proxy:!0}])},[r("div",{staticClass:"filters"},[r("van-checkbox-group",{model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},t._l(t.ORDER_STATUS,(function(e,a){return r("van-checkbox",{key:a,staticClass:"btn",attrs:{"label-disabled":"",name:e},scopedSlots:t._u([{key:"icon",fn:function(){return[r("div",{staticClass:"btn"},[t._v(" "+t._s(t._f("transactingOrderStatus")(e,"seller-content"))+" ")])]},proxy:!0}],null,!0)})})),1)],1),r("van-cell",{staticClass:"btns"},[r("van-button",{staticClass:"cancel",attrs:{type:"danger"},on:{click:t.resetFilters}},[t._v(" 重置 ")]),r("van-button",{staticClass:"confirm",attrs:{type:"primary"},on:{click:t.confirmFilters}},[t._v(" 确定 ")])],1)],1)],2)],1)},s=[],n=r(7738),i=r(5628),o=r(1380),d={components:{TransactionItem:n.A},data(){return{ORDER_STATUS:i.DF,tabs:{all:{title:"全部",loading:!1,error:!1,finished:!1,errorText:"加载失败，点击重试",finishedText:"暂无更多数据",list:[],page:1,pageSize:20},buyer:{title:"买单",loading:!1,error:!1,finished:!1,errorText:"加载失败，点击重试",finishedText:"暂无更多数据",list:[],page:1,pageSize:20},seller:{title:"卖单",loading:!1,error:!1,finished:!1,errorText:"加载失败，点击重试",finishedText:"暂无更多数据",list:[],page:1,pageSize:20}},form:{identity:"all",status:[]},lastIdentity:"all"}},watch:{"form.identity"(t,e){this.lastIdentity=e,this.tabs={all:{title:"全部",loading:!1,error:!1,finished:!1,errorText:"加载失败，点击重试",finishedText:"暂无更多数据",list:[],page:1,pageSize:20},buyer:{title:"买单",loading:!1,error:!1,finished:!1,errorText:"加载失败，点击重试",finishedText:"暂无更多数据",list:[],page:1,pageSize:20},seller:{title:"卖单",loading:!1,error:!1,finished:!1,errorText:"加载失败，点击重试",finishedText:"暂无更多数据",list:[],page:1,pageSize:20}},"filter"!=t&&this.$nextTick((()=>this.$refs[t][0].check()))}},created(){this.$root.updateUnReadCount(),this.$root.$emit("root:set-topbar",["notices","customer-service"]),this.$root.$emit("root:set-layout",{bottom:!0})},methods:{loadList(t){(0,o.uF)(this.$tls.processParams({page:this.tabs[t].page,pageSize:this.tabs[t].pageSize,identity:"all"===t?"":t,status:this.form.status},["shake"])).then((({ok:e,msg:r,data:a})=>{if(e){if(this.tabs[t].loading=!1,this.tabs[t].list.push(...a.list),this.tabs[t].page*this.tabs[t].pageSize>=a.total)return void(this.tabs[t].finished=!0);this.tabs[t].page+=1}else this.tabs[t].error=!0,this.tabs[t].errorText=r}))},confirmFilters(){this.form.identity=this.lastIdentity},resetFilters(){this.form.status=[],this.form.identity=this.lastIdentity}}},l=d,u=r(1001),c=(0,u.Z)(l,a,s,!1,null,null,null),m=c.exports},1380:function(t,e,r){r.d(e,{$Z:function(){return d},$i:function(){return o},CI:function(){return h},Ej:function(){return g},Hn:function(){return u},N8:function(){return y},R9:function(){return v},T7:function(){return b},XW:function(){return O},_H:function(){return s},_d:function(){return T},an:function(){return f},cf:function(){return m},dF:function(){return c},fW:function(){return l},l$:function(){return _},uF:function(){return n},v1:function(){return i},vi:function(){return p},y6:function(){return S}});var a=r(1922);const s=t=>(0,a.q)({url:"/Api/Market/PendingOrder/marketPendingOrderList",method:"POST",data:t}),n=t=>(0,a.q)({url:"/Api/Market/Order/myOrderList",method:"GET",data:t}),i=t=>(0,a.q)({url:"/Api/Market/Sell/index",method:"POST",data:t}),o=t=>(0,a.q)({url:"/Api/Market/Sell/recycle",method:"POST",data:t}),d=t=>(0,a.q)({url:"Api/Market/PendingOrder/myPendingOrderList",method:"POST",data:t}),l=t=>(0,a.q)({url:"/Api/Market/Order/myOrderDetail",method:"GET",data:t}),u=t=>(0,a.q)({url:"/Api/Market/PendingOrder/marketPendingOrderDetail",method:"POST",data:t}),c=t=>(0,a.q)({url:"/Api/Market/Order/getCurrentOrderStatus",method:"GET",data:t}),m=t=>(0,a.q)({url:"/Api/Market/PendingOrder/myPendingOrderDetail",method:"GET",data:t}),f=t=>(0,a.q)({url:"/Api/Market/Order/buyerCreatesOrder",method:"POST",data:t}),p=t=>(0,a.q)({url:"/Api/Market/PendingOrder/getOrderListByPendingOrder",method:"GET",data:t}),h=t=>(0,a.q)({url:"/Api/Market/Order/sellerRefusesToCreateOrder",method:"POST",data:t}),y=t=>(0,a.q)({url:"/Api/Market/Order/sellerConfirmsToCreateOrder",method:"POST",data:t}),g=t=>(0,a.q)({url:"/Api/Market/Order/sellerHasNotReceivedPayment",method:"POST",data:t}),O=t=>(0,a.q)({url:"/Api/Market/Order/sellerCompletesOrder",method:"POST",data:t}),T=t=>(0,a.q)({url:"/Api/Market/Order/buyerCancelsOrder",method:"POST",data:t}),_=t=>(0,a.q)({url:"/Api/Market/Order/buyerConfirmsOrderHasBeenPaid",method:"POST",data:t}),v=t=>(0,a.q)({url:"/Api/Market/Order/buyerAppeals",method:"POST",data:t}),S=t=>(0,a.q)({url:"/Api/Market/Order/getCancelsOrderDailyCount",method:"GET",data:t}),b=t=>(0,a.q)({url:"/Api/User/TransferOrder/userDeposit",method:"POST",data:t})},7738:function(t,e,r){r.d(e,{K:function(){return l},A:function(){return h}});var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"hang-order",on:{click:function(e){return t.$router.push("/my_hang_order/"+t.dt.pendingOrderId)}}},[r("div",{staticClass:"time"},[t._v(" 挂单时间 "+t._s(t._f("dateFormat")(t.dt.createTime,"M/D h:m:s"))+" ")]),r("div",{staticClass:"content"},[r("span",{staticClass:"payment-method"},t._l(t.payments,(function(t,e){return r("div",{key:e,staticClass:"item",class:"pay"+t})})),0),r("span",{staticClass:"order-type"},[t._v(t._s(t.dt.isSplit?"可拆分":"不可拆分"))]),r("span",{staticClass:"amount"},[t._v(" "+t._s(t._f("amountFormat")(t.dt.amount,{places:0}))+" EzB ")]),r("span",{staticClass:"order-status",class:t.stateClass},[t._v(" "+t._s(t.stateStr)+" ")]),r("van-icon",{attrs:{name:"arrow"}})],1)])},s=[],n={name:"hangOrderItem",props:{dt:{type:Object,default:()=>({createTime:(new Date).toLocaleDateString(),paymentType:7,isSplit:0,amount:"13076598",status:1,underwayOrder:1})}},computed:{stateClass(){return this.dt.underwayOrder>0?"underway":1===this.dt.status?"hanging":0===this.dt.status?"closed":void 0},stateStr(){return this.dt.underwayOrder>0?"已发起交易":1===this.dt.status?"挂单中...":0===this.dt.status?"取消挂单":void 0},payments(){return this.$root.parsePayments(this.dt.paymentType)}},methods:{}},i=n,o=r(1001),d=(0,o.Z)(i,a,s,!1,null,"4d57667a",null),l=d.exports,u=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"transaction",on:{click:function(e){return t.$router.push("/"+(t.isSale?"transaction_sale":"transaction_buy")+"/"+t.dt.orderId)}}},[r("span",{staticClass:"inout bg",class:t.isSale?"out":"in"},[t._v(" "+t._s(t.isSale?"卖":"买")+" ")]),r("span",{staticClass:"time"},[t._v(" "+t._s(t.ymd)+" "),r("br"),t._v(" "+t._s(t.hms)+" ")]),r("span",{staticClass:"amountEl"},[r("span",{staticClass:"amount",class:t.isSale?"out":"in"},[t._v(" "+t._s(t._f("amountFormat")(t.dt.amount))+" ")]),r("span",{staticClass:"unit"},[t._v(" EzB ")])]),r("span",{staticClass:"order-status",class:t._f("transactingOrderStatus")(t.dt.status)},[t._v(" "+t._s(t._f("transactingOrderStatus")(t.dt.status,"seller-content"))+" ")])])},c=[],m={name:"TransactionItem",props:{dt:{type:Object,default:()=>({orderType:1,time:(new Date).toLocaleDateString(),amount:"0",orderStatus:"WaitingSellerConfirm"})}},computed:{orderTime(){return this.$options.filters.dateFormat(this.dt.createTime,"Y/M/D h:m:s")},ymd(){return this.orderTime.slice(0,10)},hms(){return this.orderTime.slice(11)},isSale(){return this.dt.sellerId==this.$root.userInfo.userId}}},f=m,p=(0,o.Z)(f,u,c,!1,null,"7189fb62",null),h=p.exports}}]);